GUIA RÃPIDO DE TESTES

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“‹ ESTRUTURA

tests/
â”œâ”€â”€ setup.js              # ConfiguraÃ§Ã£o global do Jest
â”œâ”€â”€ helpers.js            # FunÃ§Ãµes auxiliares para testes
â”œâ”€â”€ mocks.js              # Mocks e dados de teste
â”œâ”€â”€ unit/                 # Testes unitÃ¡rios (funÃ§Ãµes isoladas)
â”‚   â”œâ”€â”€ validators.test.js
â”‚   â”œâ”€â”€ apiResponse.test.js
â”‚   â””â”€â”€ logger.test.js
â””â”€â”€ integration/          # Testes de integraÃ§Ã£o (endpoints HTTP)
    â”œâ”€â”€ auth.test.js
    â”œâ”€â”€ categoria.test.js
    â”œâ”€â”€ aluno.test.js
    â”œâ”€â”€ curso.test.js
    â””â”€â”€ health.test.js

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸš€ EXECUTAR TESTES

1. Todos os testes:
   npm test

2. Com modo watch (reexecuta ao salvar arquivo):
   npm run test:watch

3. Com cobertura (quantos % do cÃ³digo foi testado):
   npm run test:coverage

4. Teste especÃ­fico:
   npm test -- validators.test.js

5. Teste com filtro:
   npm test -- --testNamePattern="validateEmail"

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“ TIPOS DE TESTES

UNITÃRIOS (unit/):
- Testam uma funÃ§Ã£o em ISOLAMENTO
- Mock de dependÃªncias externas
- Exemplo: validadores, formatadores

INTEGRAÃ‡ÃƒO (integration/):
- Testam requisiÃ§Ãµes HTTP COMPLETAS
- Testam fluxo real: request â†’ validaÃ§Ã£o â†’ banco â†’ response
- Exemplo: POST /auth/register â†’ usuÃ¡rio criado â†’ token retornado

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ³ DOCKER + TESTES

1. Rodar tudo em Docker:
   bash setup-docker.sh

2. Rodar testes dentro de container:
   docker-compose exec app npm test

3. Ver logs:
   docker-compose logs app

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“Š COBERTURA DE TESTES

ApÃ³s rodar: npm run test:coverage

Abre em: coverage/index.html

Significado:
- Statements: % de linhas de cÃ³digo executadas
- Branches: % de condiÃ§Ãµes (if/else) testadas
- Functions: % de funÃ§Ãµes testadas
- Lines: % de linhas de cÃ³digo testadas

OBJETIVO: Atingir 80%+ em todas as categorias

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœï¸ ESCREVER UM NOVO TESTE

1. Criar arquivo: tests/unit/meuTeste.test.js

2. Estrutura bÃ¡sica:

   describe('Minha funÃ§Ã£o', () => {
     test('deve fazer algo especÃ­fico', () => {
       const resultado = minhaFuncao(entrada);
       expect(resultado).toBe(esperado);
     });
   });

3. MÃ©todos de assertions:
   - expect(x).toBe(valor)          // Igualdade exata
   - expect(x).toEqual(objeto)      // ComparaÃ§Ã£o profunda
   - expect(x).toBeDefined()        // Definido
   - expect(x).toBeNull()           // Null
   - expect(x).toContain('texto')   // ContÃ©m
   - expect(x).toThrow()            // LanÃ§a exceÃ§Ã£o

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ”„ CI/CD AUTOMÃTICO

A cada PUSH, GitHub Actions:
1. Roda todos os testes
2. Verifica cobertura
3. Faz build do Docker
4. Verifica vulnerabilidades com Trivy

Se TUDO passar â†’ Deploy automÃ¡tico

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
